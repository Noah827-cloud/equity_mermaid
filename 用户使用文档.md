# 股权关系图生成工具使用文档

## 1. 项目概述

本工具是一个专业的股权关系可视化应用，旨在帮助用户快速分析、展示和编辑企业股权结构。通过直观的图形界面，用户可以轻松构建和查看复杂的股权网络关系，适用于企业分析、财务尽调、投资研究等场景。

## 2. 系统要求

- **Windows 10/11** 操作系统
- 至少 **4GB 内存**
- **浏览器**：Chrome、Firefox、Edge等现代浏览器（应用将自动打开）
- 无需安装Python或其他依赖（独立运行版本）

## 3. 安装与启动

### 3.1 独立运行版（免安装）

1. 从提供的压缩包中解压文件到任意位置
2. 打开解压后的文件夹，找到并双击 `equity_mermaid_tool.exe` 文件
3. 应用将自动启动并在默认浏览器中打开（默认访问地址：http://localhost:8501）

> **注意**：如果遇到权限问题，请右键点击exe文件并选择「以管理员身份运行」

### 3.2 Python源码运行版

如果您需要从源码运行，请按照以下步骤操作：

1. 确保已安装Python 3.7或更高版本
2. 克隆或下载项目代码到本地
3. 安装所需依赖：
   ```bash
   pip install -r requirements.txt
   ```
4. 运行应用：
   ```bash
   python start_app.py
   ```

## 4. 功能介绍

### 4.1 图像识别模式

图像识别模式允许用户上传包含股权结构信息的图片，系统将自动识别其中的公司、股东及持股关系，快速生成结构化数据和可视化图表。

**使用步骤**：
1. 点击左侧菜单中的「图像识别模式」
2. 点击「上传图片」按钮，选择包含股权结构信息的图片文件
3. 系统将自动分析图片内容，提取公司名称、股东信息和持股比例
4. 查看识别结果，可进行必要的手动修正
5. 点击「生成股权图」按钮，查看可视化的股权关系图

### 4.2 手动编辑模式

手动编辑模式提供一个交互式界面，允许用户手动创建和编辑股权关系数据，精确控制股权结构的各个细节。

**使用步骤**：
1. 点击左侧菜单中的「手动编辑模式」
2. 在编辑区域输入或粘贴股权结构数据，支持JSON格式
3. 系统将实时解析数据并显示预览
4. 可以通过界面工具调整节点位置、连线样式等
5. 点击「生成股权图」按钮，生成最终的可视化图表

## 5. 数据格式说明

### 5.1 股权数据JSON格式

股权数据采用JSON格式表示，基本结构如下：

```json
{
  "核心公司": {
    "股东1": "持股比例",
    "股东2": "持股比例",
    ...
  },
  "子公司1": {
    "核心公司": "持股比例",
    "其他股东": "持股比例",
    ...
  },
  ...
}
```

示例：
```json
{
  "母公司": {
    "股东A": "60%",
    "股东B": "40%"
  },
  "子公司1": {
    "母公司": "80%",
    "股东C": "20%"
  }
}
```

## 6. 高级功能

### 6.1 图表导出

生成股权关系图后，您可以：
- 复制图表代码用于其他文档
- 导出为图片保存到本地
- 保存为HTML文件以便在浏览器中查看

### 6.2 布局调整

在图表生成后，您可以通过以下方式调整布局：
- 拖拽节点调整位置
- 修改连线样式和颜色
- 调整节点大小和形状
- 切换不同的布局算法

## 7. 常见问题解答

### 7.1 应用无法启动怎么办？

- 确保您的操作系统是Windows 10/11
- 尝试以管理员身份运行
- 检查是否有其他程序占用了8501端口
- 检查杀毒软件是否阻止了应用运行

### 7.2 图像识别不准确怎么办？

- 确保图片清晰可读，文字不要模糊
- 尽量使用标准格式的股权结构图
- 使用手动编辑模式修正识别结果
- 对于复杂结构，建议直接使用手动编辑模式

### 7.3 如何分享生成的股权图？

- 导出为图片或HTML文件
- 复制图表代码嵌入到其他文档中
- 保存数据为JSON格式，可在其他设备上导入使用

## 8. 联系与支持

如有任何问题或建议，请联系技术支持团队。

## 9. 更新日志

### v1.0
- 初始版本发布
- 支持图像识别模式和手动编辑模式
- 提供基本的图表导出功能

---

*文档最后更新时间：2025年10月*