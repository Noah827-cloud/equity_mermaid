# 密码输入框样式修复说明

## 问题分析

### 原因
"管理员密码"输入框和"调整阈值"输入框的区别：

1. **管理员密码** (`st.text_input(type="password")`)
   - 有一个**显示/隐藏密码的眼睛图标按钮**
   - 这个按钮使用的是 Streamlit 的图标按钮组件
   - CSS 选择器：`button[kind="icon"]` 或 `button[data-testid="baseButton-icon"]`

2. **调整阈值** (`st.number_input()`)
   - 只有数字输入框，**没有额外的按钮**
   - 所以看起来"正常"

### 解决方案

#### 方法 1：使用更强的 CSS 选择器（已实施）

```css
/* 密码输入框的显示/隐藏按钮 */
section[data-testid="stSidebar"] div[data-testid="stPasswordInput"] button,
section[data-testid="stSidebar"] button[kind="icon"],
section[data-testid="stSidebar"] button[data-testid="baseButton-icon"] {
    background: #0c3f98 !important;
    color: #ffffff !important;
}

/* 眼睛图标的颜色 */
section[data-testid="stSidebar"] button svg {
    color: #ffffff !important;
    fill: #ffffff !important;
}
```

#### 方法 2：使用 Streamlit 配置（备用方案）

在 `.streamlit/config.toml` 中设置全局主题：

```toml
[theme]
primaryColor = "#0c3f98"
backgroundColor = "#0e4166"
secondaryBackgroundColor = "#1a5c8a"
textColor = "#f5f9ff"
```

## 如何验证修复

1. **完全清除浏览器缓存**
   ```
   Chrome/Edge: Ctrl + Shift + Delete
   勾选"缓存的图像和文件"
   ```

2. **强制刷新页面**
   ```
   Windows: Ctrl + Shift + R 或 Ctrl + F5
   ```

3. **查看效果**
   - 打开侧边栏 → "ℹ️ 使用说明"
   - 找到"翻译额度管理"部分
   - 检查"管理员密码"输入框右侧的眼睛图标按钮

## 期望效果

| 元素 | 背景色 | 文字/图标颜色 |
|------|--------|---------------|
| 密码输入框 | 白色 #ffffff | 深蓝色 #0a2458 |
| 眼睛图标按钮 | **深蓝色** #0c3f98 | **白色** #ffffff |
| 悬停时 | **亮蓝色** #1452c0 | 白色 #ffffff |

## BOM 字符问题

每次编辑文件时，编辑器可能会添加 BOM 字符。

### 快速修复
```powershell
powershell -ExecutionPolicy Bypass -File scripts\remove_bom.ps1
```

### 永久解决
在 Cursor 中：
1. 点击右下角的 "UTF-8"
2. 选择 "Save with Encoding"
3. 选择 "UTF-8"（**不要**选 "UTF-8 with BOM"）

